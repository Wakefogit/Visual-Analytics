<!DOCTYPE html>
{% extends 'nav.html' %}
{% block baseblock  %}

{% load static %}
<html lang="en">
<title>Visual Analytics | Report </title>
<style>
/* Styling for the popup */
.popup {
  display: none; /* Hide the popup by default */
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent background */
  z-index: 9999;
}

.popup-content {
    max-height: 480px;
    background-color: #fefefe;
    margin: 7% auto;
    border: 1px solid #888;
    width: 80%;
}

/* Styling for the table */
table {
  width: 100%;
  border-collapse: collapse;
}
 td {
  padding: 8px;
  text-align: left;
  border-bottom: 1px solid #ddd;
}

th {
  background-color: #f2f2f2;
  position: sticky;
  top: 0;

}
.alert-danger {
    color: #4f4244;
    background-color: #f5cdd1;
    border-color: #000000;
    width: 302px;
    padding-left: 28px;
    left: 347px;
}


</style>
<form method="POST">
    {% csrf_token %}
<body>

   <div class="mt-2 mb-2 float-right d-flex pl-3 pr-3 mr-4">
      <div class="row">
        <div class="col-md-7 d-inline-block">
          <input type="text" class="form-control" id="usr" placeholder="Search" style="border-radius: 30px;">
        </div>
        <div class="col-md-5">
          <div class="row">
            <div class="col-md-3 col-sm-3">
              <div class="dropdown">
                <a href="#" class="dropdown-toggle " id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fa fa-filter p-2 text-info border"></i></a>

                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
<!--                  <div class="dropdown-item">-->
<!--                    <input type="checkbox" id="option1" name="violation_type" value="All">-->
<!--                    <label for="option1">All</label>-->
<!--                  </div>-->
                  <div class="dropdown-item">
                    <input type="checkbox" id="option2" name="violation_type" value="NO_helmet">
                    <label for="option2">PPE</label>
                  </div>
                  <div class="dropdown-item">
                    <input type="checkbox" id="option3" name="violation_type" value="hazard_protection">
                    <label for="option3">Hazard Protection</label>
                  </div>
                  <div class="dropdown-item">
                    <input type="checkbox" id="option4"  name="violation_type" value="double Billet">
                    <label for="option4">Double Billet</label>
                  </div>
                  <div class="dropdown-item">
                    <input type="checkbox" id="option5"  name="violation_type" value="Vehicle_Speed">
                    <label for="option5">speed</label>
                  </div>
<!--                    <button id="myButton1" class="btn btn-primary" formaction="/filter_table/{{token1}}" >Apply</button>-->
                </div>
              </div>
            </div>
            <div class="col-md-3 col-sm-3">
              <div class="dropdown">
                <a href="#" class="dropdown-toggle" id="dropdownMenuButton1" data-toggle="dropdown"><i class="fa fa-calendar p-2 text-success border"></i></a>

                <div class="dropdown-menu w-100 dropdown-menu-right" aria-labelledby="dropdownMenuButton1" style="width: 32rem!important;">
                  <div class="dropdown-item">
                    <div class="row">
                      <div class="col">
<!--                            <div class="form-group">-->
<!--                          <label for="usr">From:</label>-->
<!--                          <input type="date" class="form-control" id="fromDateTime" name="start_date" placeholder="From">-->
<!--                          <div class="input-group-append">-->
<!--                            <span class="input-group-text">-->
<!--                              <i class="fa fa-calendar"></i>-->
<!--                            </span>-->
<!--                        </div>-->
                        <div class="form-group">
                       <label for="fromDateTime">From:</label>
                       <input type="date" class="form-control" id="fromDateTime" name="start_date" placeholder="From">
                       <div class="input-group-append">

                       </div>
                    </div>
                      </div>
                      <div class="col">
                        <div class="form-group">
                           <label for="toDateTime">To:</label>
                         <input type="date" class="form-control" id="toDateTime" name="end_date" placeholder="To">
                          <div class="input-group-append">

                          </div>
                        </div>
                      </div>
                       <div class="col" style="margin-top:30px;">
                           <button id="myButton" class="btn btn-primary" onclick="myFunction()"  formaction="/filter_report/{{token1}}" >filter</button>
                      </div>
                    </div>


                  </div>

                </div>
              </div>
            </div>
            <div class="col-md-3 col-sm-3">
              <a href="/download/"><i class="fa fa-download p-2 text-danger border"></i></a>
            </div>
            <div class="col-md-3 col-sm-3">

            <a href="#"><i class="fa fa-sort p-2 text-primary border"></i></a>
            </div>
          </div>

        </div>


  </div>
</div>

                                                {% if messages %}
                                              {% for message in messages %}

                                                  <div class="alert alert-danger" role="alert">
                                                                  {{ message }}.
                                                 </div>

                                             {% endfor %}
                                             {% endif %}

<div class="data">


    {% if table %}

<div class="table-responsive container-fluid" style="    overflow: auto;height: 400px;">
    <table class="table table-bordered" >
      <thead>
        <tr>
           <th>Violation_Id </th>
                <th>Violoation_type </th>
                <th>time_stamp</th>
                <th>Camera-number</th>
                <th>supervisor_remark</th>
                <th>artefact</th>
                <th>message</th>


        </tr>
      </thead>
      <tbody>

         {% for dashboard in table %}
            <tr>
            <td>{{dashboard.violation_id}}</td>
                <td>{{dashboard.violation_type}}</td>
                <td>{{dashboard.time_stamp}}</td>
                <td>{{dashboard.camera_number}}</td>
                <td>{{dashboard.supervisor_remark}}</td>
               <td> <a href="{% static '' %}{{dashboard.artefact}}" target="_blank">view</a></td>
                <td>{{dashboard.message}}</td>
                </tr>
                          </tbody>
        {% endfor %}
     </table>
     </div>

    {% else %}
    <h1>no record found</h1>

    {% endif %}



</div>
<!--<script>-->
<!--    window.setTimeout( function() {-->
<!--  window.location.reload();-->
<!--}, 10000);-->
<!--</script>-->
<script>
 $(document).on('click', '.dropdown-menu', function (e) {
        e.stopPropagation();
    });
</script>
</body>


</form>

</html>
{% endblock %}
