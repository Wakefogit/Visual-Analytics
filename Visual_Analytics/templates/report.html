<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
     <meta charset="utf-8">
    <meta http-equiv=”refresh” content=”5" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>



    <title>report</title>
</head>
<form method="POST">
    {% csrf_token %}
<body>
<!--<form method="get">-->
<!-- <label for="startdate">start date:</label>-->
<!--  <input type="date" id="startdate" name="startdate">-->
<!--          <label for="enddate">END date:</label>-->
<!--  <input type="date" id="enddate" name="enddate">-->
<!--  <button type="submit" formaction="/filter_report/{{token1}}" class="btn btn-theme pl-4 pr-4 mb-5 mt-1">filter</button>-->
<!--    </form>-->

  <label for="start_date">Start Date:</label>
  <input type="date" id="start_date" name="start_date">
  <label for="end_date">End Date:</label>
  <input type="date" id="end_date" name="end_date">
  <button type="submit" formaction="/filter_report/{{token1}}">Filter</button>


<div class="data">

    <h1>report</h1>
    {% if table %}

<div class="table-responsive">
    <table class="table table-bordered" >
      <thead>
        <tr>
           <th>Violation_Id </th>
                <th>Violoation_type </th>
                <th>time_stamp</th>
                <th>Camera-number</th>
                <th>supervisor_remark</th>
                <th>artefact</th>
                <th>message</th>


        </tr>
      </thead>
      <tbody>

         {% for dashboard in table %}
            <tr>
            <td>{{dashboard.violation_id}}</td>
                <td>{{dashboard.violation_type}}</td>
                <td>{{dashboard.time_stamp}}</td>
                <td>{{dashboard.camera_number}}</td>
                <td>{{dashboard.supervisor_remark}}</td>
               <td> <a href="{% static '' %}{{dashboard.artefact}}" target="_blank">view</a></td>
                <td>{{dashboard.message}}</td>
                </tr>
                          </tbody>
        {% endfor %}
     </table>
     </div>

    {% else %}
    <h1>no record found</h1>

    {% endif %}

<button type="submit" formaction="/download/">download</button>

</div>
<!--<script>-->
<!--    window.setTimeout( function() {-->
<!--  window.location.reload();-->
<!--}, 10000);-->
<!--</script>-->
</body>


</form>

</html>